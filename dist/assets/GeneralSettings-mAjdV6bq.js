import{_ as ne,r as c,x as oe,o as ie,z as S,a as F,b as _,d as t,e as i,$ as w,w as u,g as E,t as H,F as q,l as z,G as M,a3 as N,aa as R,ab as G,u as T,ac as B,ad as L,ae as re,m as $,I as V}from"./index-C0-PuIqm.js";const ue="/assets/time-2-xXG-ap4K.png",de={class:"form-container"},pe={class:"form-header"},me={class:"toggle-section"},ce={class:"sync-info-section"},ve={class:"sync-info-item"},we={class:"info-value"},fe={class:"right-actions"},_e={class:"time-selector-wrapper"},ge={class:"dialog-footer"},Se={class:"form-grid"},he={class:"form-section"},ye={class:"group"},be={class:"input-group"},Me={class:"input-group"},Re={class:"password-input-container"},Ve=["type"],xe={class:"input-group"},De={class:"form-section"},ke={class:"group"},Pe={class:"input-group"},Ee={class:"input-group"},Te={class:"password-input-container"},$e=["type"],Ae={class:"input-group"},Ce={class:"form-section"},Ue={class:"group"},je={class:"input-group"},Fe={class:"form-section"},Ne={class:"group"},Ie={class:"input-group"},He={class:"button-group"},qe={class:"save-btn-container"},ze={__name:"GeneralSettings",setup(Ge){const A=l=>new Promise(e=>setTimeout(e,l)),h=c(!1),k=c(!1),P=c(!1),f=c(null),y=c("-"),I=c("-"),x=c(!1),d=c(null),m=c(null),v=c(null),K=c(Array.from({length:12},(l,e)=>e)),O=c(Array.from({length:60},(l,e)=>e)),W=l=>`${(l===0?12:l).toString().padStart(2,"0")} Hour`,Y=l=>`${l.toString().padStart(2,"0")} Minute`,X=()=>{x.value=!0,re(()=>{const l=document.querySelector(".time-picker-form .time-select:first-child");l==null||l.focus()})},J=()=>{if(!d.value&&d.value!==0){$.warning("Please select Hour!");return}if(!m.value&&m.value!==0){$.warning("Please select Minute!");return}if(!v.value){$.warning("Please select AM/PM!");return}C(),x.value=!1,$.success("Time setting saved!")},C=()=>{if(!d.value&&d.value!==0||!m.value&&m.value!==0||!v.value)return;const l=new Date;let e=d.value;v.value==="PM"&&(e+=12);const r=new Date(l.getFullYear(),l.getMonth(),l.getDate(),e,m.value,0);I.value=b(r)},b=l=>{if(!l||(l instanceof Date||(l=new Date(l)),isNaN(l.getTime())))return"-";const e=l.getDate(),r=s=>{if(s>3&&s<21)return"th";switch(s%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},p=l.toLocaleDateString("en-US",{month:"short"}),n=l.getFullYear(),o=l.getHours(),D=l.getMinutes().toString().padStart(2,"0"),U=l.getSeconds().toString().padStart(2,"0"),j=o>=12?"PM":"AM";let g=o%12;return g===0&&(g=12),`${g}:${D}:${U} ${j} ${p} ${e}${r(e)}, ${n}`};oe([d,m,v],()=>{C()});const a=c({hwRecipient:{email:"",password:"",imap:""},rjwSender:{email:""},hwSender:{email:"",password:"",smtp:""},rjwRecipient:{email:""}});function Q(l){return[l.import_email,l.import_password,l.import_imap,l.note_email,l.note_password,l.note_smtp].every(r=>r&&r.trim()!=="")}async function Z(){return await A(500),{data:{ret:0,ret_data:{import_email:"import@example.com",import_password:"import123",import_imap:"imap.example.com",note_email:"notification@example.com",note_password:"note123",note_smtp:"smtp.example.com",import_send_email:"sender@example.com",note_res_email:"recipient@example.com",send_time:"10:30"}},status:200,statusText:"OK",headers:{},config:{}}}async function ee(l){return await A(500),{data:{ret:0,msg:"Configuration saved successfully"},status:200,statusText:"OK",headers:{},config:{}}}async function te(l){return await A(500),{data:{ret:0,msg:"Data synchronization completed successfully"},status:200,statusText:"OK",headers:{},config:{}}}const ae=async()=>{try{const l=await Z();if(l.data&&l.data.ret===0){const e=l.data.ret_data;if(a.value.hwRecipient.email=e.import_email||"",a.value.hwRecipient.password=e.import_password||"",a.value.hwRecipient.imap=e.import_imap||"",a.value.hwSender.email=e.note_email||"",a.value.hwSender.password=e.note_password||"",a.value.hwSender.smtp=e.note_smtp||"",a.value.rjwSender.email=e.import_send_email||"",a.value.rjwRecipient.email=e.note_res_email||"",h.value=Q(e),e.send_time){const[r,p]=e.send_time.split(":").map(Number);!isNaN(r)&&!isNaN(p)&&(r>=12?(v.value="PM",d.value=r===12?0:r-12):(v.value="AM",d.value=r),m.value=p)}else d.value=10,m.value=30,v.value="AM";f.value=new Date,y.value=b(f.value)}else f.value=new Date,y.value=b(f.value),d.value=10,m.value=30,v.value="AM"}catch{f.value=new Date,y.value=b(f.value),d.value=10,m.value=30,v.value="AM"}finally{C()}},le=async()=>{var r,p;const e=[{value:a.value.hwRecipient.email,name:"Recipient Email"},{value:a.value.hwRecipient.password,name:"Recipient Password"},{value:a.value.hwRecipient.imap,name:"IMAP Address"},{value:a.value.hwSender.email,name:"Sender Email"},{value:a.value.hwSender.password,name:"Sender Password"},{value:a.value.hwSender.smtp,name:"SMTP Address"}].filter(n=>{var o;return!((o=n.value)!=null&&o.trim())});if(e.length>0){const n=e.map(o=>o.name).join(", ");V.alert(`Missing fields: ${n}`,"Warning",{type:"warning"}).catch(()=>{});return}try{const n={id:1,import_email:a.value.hwRecipient.email,import_password:a.value.hwRecipient.password,import_imap:a.value.hwRecipient.imap,import_send_email:a.value.rjwSender.email||"",note_email:a.value.hwSender.email,note_password:a.value.hwSender.password,note_smtp:a.value.hwSender.smtp,note_res_email:a.value.rjwRecipient.email||"",send_time:`${d.value===0?12:d.value}:${m.value.toString().padStart(2,"0")}`},o=await te(n);if(((r=o.data)==null?void 0:r.ret)===0)f.value=new Date,y.value=b(f.value),V.alert("Sync success!","Success",{type:"success"}).catch(()=>{});else throw new Error(((p=o.data)==null?void 0:p.msg)||"Sync failed")}catch(n){V.alert(`Sync error: ${n.message}`,"Error",{type:"error"}).catch(()=>{})}},se=async()=>{var r,p;const e=[{value:a.value.hwRecipient.email,name:"Recipient Email"},{value:a.value.hwRecipient.password,name:"Recipient Password"},{value:a.value.hwRecipient.imap,name:"IMAP Address"},{value:a.value.hwSender.email,name:"Sender Email"},{value:a.value.hwSender.password,name:"Sender Password"},{value:a.value.hwSender.smtp,name:"SMTP Address"}].filter(n=>{var o;return!((o=n.value)!=null&&o.trim())});if(e.length>0){const n=e.map(o=>o.name).join(", ");V.alert(`Missing fields: ${n}`,"Warning",{type:"warning"}).catch(()=>{});return}try{const n={id:1,import_email:a.value.hwRecipient.email,import_password:a.value.hwRecipient.password,import_imap:a.value.hwRecipient.imap,import_send_email:a.value.rjwSender.email||"",note_email:a.value.hwSender.email,note_password:a.value.hwSender.password,note_smtp:a.value.hwSender.smtp,note_res_email:a.value.rjwRecipient.email||"",send_time:`${d.value===0?12:d.value}:${m.value.toString().padStart(2,"0")}`},o=await ee(n);if(((r=o.data)==null?void 0:r.ret)===0)f.value=new Date,y.value=b(f.value),V.alert("Save success!","Success",{type:"success"}).catch(()=>{});else throw new Error(((p=o.data)==null?void 0:p.msg)||"Save failed")}catch(n){V.alert(`Save error: ${n.message}`,"Error",{type:"error"}).catch(()=>{})}};return ie(()=>{ae()}),(l,e)=>{const r=S("el-switch"),p=S("el-button"),n=S("el-option"),o=S("el-select"),D=S("el-form-item"),U=S("el-form"),j=S("el-dialog"),g=S("el-icon");return _(),F("div",de,[t("div",pe,[e[20]||(e[20]=t("h2",{class:"form-title"},"General Settings",-1)),t("div",me,[e[16]||(e[16]=t("span",{class:"toggle-label"},"Synchronize all data regularly",-1)),i(r,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=s=>h.value=s),class:"toggle-switch"},null,8,["modelValue"])]),t("div",ce,[i(p,{class:"manual-sync-btn",onClick:le},{default:u(()=>[...e[17]||(e[17]=[E(" Manual Synchronization ",-1)])]),_:1}),t("div",ve,[e[18]||(e[18]=t("span",{class:"info-label"},"Last Synchronization:",-1)),t("span",we,H(y.value),1)]),t("div",fe,[t("div",_e,[e[19]||(e[19]=t("span",{class:"info-label"},"Setup Auto Synchronization Time:",-1)),i(p,{class:"time-select-btn"},{default:u(()=>[E(H(I.value),1)]),_:1}),t("img",{src:ue,alt:"Time Icon",class:"time-icon",onClick:X})])])])]),i(j,{modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=s=>x.value=s),title:"Set Auto Synchronization Time",width:"565px",style:{"--you-dialog-width":"565px","font-weight":"700",color:"#000",gap:"28px","border-radius":"24px","padding-top":"52px","padding-right":"24px","padding-bottom":"52px","padding-left":"24px"},"custom-class":"custom-dialog","close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":""},{footer:u(()=>[t("span",ge,[i(p,{type:"default",class:"cancel-btn",onClick:e[4]||(e[4]=s=>x.value=!1)},{default:u(()=>[...e[21]||(e[21]=[E("Cancel",-1)])]),_:1}),i(p,{type:"primary",class:"save-btn",onClick:J},{default:u(()=>[...e[22]||(e[22]=[E("Confirm",-1)])]),_:1})])]),default:u(()=>[i(U,{"label-position":"top",class:"time-picker-form"},{default:u(()=>[i(D,{label:"Hour*"},{default:u(()=>[i(o,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=s=>d.value=s),placeholder:"Select Hour",class:"time-select"},{default:u(()=>[(_(!0),F(q,null,z(K.value,s=>(_(),M(n,{key:s,label:W(s),value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(D,{label:"Minute*"},{default:u(()=>[i(o,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),placeholder:"Select Minute",class:"time-select"},{default:u(()=>[(_(!0),F(q,null,z(O.value,s=>(_(),M(n,{key:s,label:Y(s),value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(D,{label:"Period*"},{default:u(()=>[i(o,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=s=>v.value=s),placeholder:"Select Period",class:"time-select"},{default:u(()=>[i(n,{label:"AM",value:"AM"}),i(n,{label:"PM",value:"PM"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),w(t("div",Se,[e[37]||(e[37]=t("div",{class:"email-setup-title"},[t("h2",null,"Setup Email Account")],-1)),t("section",he,[e[27]||(e[27]=t("h3",{class:"section-title"},"User data import",-1)),t("div",ye,[e[26]||(e[26]=t("h4",{class:"group-title"},"Recipient's email information",-1)),t("div",be,[e[23]||(e[23]=t("label",null,"Email account",-1)),w(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.hwRecipient.email=s),type:"email",class:"form-input",placeholder:"Enter recipient's email"},null,512),[[R,a.value.hwRecipient.email]])]),t("div",Me,[e[24]||(e[24]=t("label",null,"Password",-1)),t("div",Re,[w(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>a.value.hwRecipient.password=s),type:k.value?"text":"password",class:"form-input",placeholder:"Enter password"},null,8,Ve),[[G,a.value.hwRecipient.password]]),i(p,{class:"password-toggle-btn",onClick:e[8]||(e[8]=s=>k.value=!k.value)},{default:u(()=>[k.value?(_(),M(g,{key:0},{default:u(()=>[i(T(B))]),_:1})):(_(),M(g,{key:1},{default:u(()=>[i(T(L))]),_:1}))]),_:1})])]),t("div",xe,[e[25]||(e[25]=t("label",null,"IMAP service address",-1)),w(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>a.value.hwRecipient.imap=s),type:"text",class:"form-input",placeholder:"Enter IMAP address"},null,512),[[R,a.value.hwRecipient.imap]])])])]),t("section",De,[e[32]||(e[32]=t("h3",{class:"section-title"},"Equipment malfunction notification",-1)),t("div",ke,[e[31]||(e[31]=t("h4",{class:"group-title"},"Sender's email address",-1)),t("div",Pe,[e[28]||(e[28]=t("label",null,"Email account",-1)),w(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>a.value.hwSender.email=s),type:"email",class:"form-input",placeholder:"Enter sender's email"},null,512),[[R,a.value.hwSender.email]])]),t("div",Ee,[e[29]||(e[29]=t("label",null,"Password",-1)),t("div",Te,[w(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>a.value.hwSender.password=s),type:P.value?"text":"password",class:"form-input",placeholder:"Enter password"},null,8,$e),[[G,a.value.hwSender.password]]),i(p,{class:"password-toggle-btn",onClick:e[12]||(e[12]=s=>P.value=!P.value)},{default:u(()=>[P.value?(_(),M(g,{key:0},{default:u(()=>[i(T(B))]),_:1})):(_(),M(g,{key:1},{default:u(()=>[i(T(L))]),_:1}))]),_:1})])]),t("div",Ae,[e[30]||(e[30]=t("label",null,"SMTP service address",-1)),w(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>a.value.hwSender.smtp=s),type:"text",class:"form-input",placeholder:"Enter SMTP address"},null,512),[[R,a.value.hwSender.smtp]])])])]),t("section",Ce,[e[34]||(e[34]=t("h3",{class:"section-title"},"Sender's email address",-1)),t("div",Ue,[t("div",je,[e[33]||(e[33]=t("label",null,"Verify Email account",-1)),w(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>a.value.rjwSender.email=s),type:"email",class:"form-input",placeholder:"Enter sender's email"},null,512),[[R,a.value.rjwSender.email]])])])]),t("section",Fe,[e[36]||(e[36]=t("h3",{class:"section-title"},"Recipient's email information",-1)),t("div",Ne,[t("div",Ie,[e[35]||(e[35]=t("label",null,"Verify Email account",-1)),w(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>a.value.rjwRecipient.email=s),type:"email",class:"form-input",placeholder:"Enter recipient's email"},null,512),[[R,a.value.rjwRecipient.email]])])])])],512),[[N,h.value]]),w(t("div",He,null,512),[[N,h.value]]),w(t("div",qe,[t("button",{class:"send-btn",onClick:se},"Save")],512),[[N,h.value]])])}}},Le=ne(ze,[["__scopeId","data-v-359390cb"]]);export{Le as default};
